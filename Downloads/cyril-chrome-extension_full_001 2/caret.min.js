!(function () {
  function d(d, e, f, g) {
    if (!b)
      throw new Error(
        "textarea-caret-position#getCaretCoordinates should only be called in a browser",
      );
    var h = (g && g.debug) || !1;
    if (h) {
      var i = document.querySelector(
        "#input-textarea-caret-position-mirror-div",
      );
      i && i.parentNode.removeChild(i);
    }
    var j = document.createElement("div");
    (j.id = "input-textarea-caret-position-mirror-div"),
      document.body.appendChild(j);
    var k = j.style,
      l = window.getComputedStyle ? getComputedStyle(d) : d.currentStyle;
    (k.whiteSpace = "pre-wrap"),
      "INPUT" !== d.nodeName && (k.wordWrap = "break-word"),
      (k.position = "absolute"),
      h || (k.visibility = "hidden"),
      a.forEach(function (a) {
        k[a] = l[a];
      }),
      c
        ? d.scrollHeight > parseInt(l.height) && (k.overflowY = "scroll")
        : (k.overflow = "hidden"),
      (j.textContent = d.value.substring(0, f)),
      "INPUT" === d.nodeName &&
        (j.textContent = j.textContent.replace(/\s/g, "Â "));
    var m = document.createElement("span");
    (m.textContent = d.value.substring(f) || "."), j.appendChild(m);
    var n = {
      top: m.offsetTop + parseInt(l.borderTopWidth),
      left: m.offsetLeft + parseInt(l.borderLeftWidth),
    };
    return (
      h ? (m.style.backgroundColor = "#aaa") : document.body.removeChild(j), n
    );
  }
  var a = [
      "direction",
      "boxSizing",
      "width",
      "height",
      "overflowX",
      "overflowY",
      "borderTopWidth",
      "borderRightWidth",
      "borderBottomWidth",
      "borderLeftWidth",
      "borderStyle",
      "paddingTop",
      "paddingRight",
      "paddingBottom",
      "paddingLeft",
      "fontStyle",
      "fontVariant",
      "fontWeight",
      "fontStretch",
      "fontSize",
      "fontSizeAdjust",
      "lineHeight",
      "fontFamily",
      "textAlign",
      "textTransform",
      "textIndent",
      "textDecoration",
      "letterSpacing",
      "wordSpacing",
      "tabSize",
      "MozTabSize",
    ],
    b = "undefined" != typeof window,
    c = b && null != window.mozInnerScreenX;
  window.getCaretCoordinates = d;
})();
